<html>
    <head>
        <title>Resultados</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=MedievalSharp" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    </head>


    <body id="body" style="">
		ApiFailure

		
		


    </body>
	<script>	 
	function updateContent(classe,color,description){
		/* 	var pclass = document.getElementById("class");
				 var pclassstyle = pclass.getAttribute("style") + "color:"+color+";";
				 var pdesc = document.getElementById("description");
				 var body = document.getElementById("body"); */
				document.getElementById("body").innerHTML = '<h1 class="display-1" style="font-family:MedievalSharp;font-weight:bold;margin:5px;">Â¡Has acabado el examen!</h1>'+
        '<p class="display-4" style="font-family:MedievalSharp;" > Consideramos que la mejor clase para ti es: </p>'+
        '<p class="display-2" id="class" style="font-family:MedievalSharp;margin-left:20%;width;40%;color:'+color+';">'+ classe +'</p>'+
        '<p style="font-family:MedievalSharp;margin-left:30%;" id="description">'+description+ '</p>';
			
				 document.getElementById("body").setAttribute("style","background-image:url('{{ url_for("static", filename="pics/"+clase+".jpg" ) }}');background-repeat:no-repeat;background-position:bottom right;height:99vh;background-size:30% 50%;");
				/*	 pclass.innerHTML = classe;
				 pdesc.innerHTML = description;
				 pclass.setAttribute("style",pclassstyle);
				 */
				 }
	</script>	
	<script>		

		
		var url = '{{ apiurl }}/api/result/{{clase}}'
		
		var ClassResult = "";
		updateDisplay('');	
		
		function updateDisplay(verse) {
			let request = new XMLHttpRequest();
			request.open('GET', url);
			request.responseType = 'text';
			
			request.onload = function() {
				content = JSON.parse(request.response);
				updateContent(content["classe"],content["color"],content["description"]);
			};
	
			request.send();
		}


</script>
	

				
</html>
